<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>practica api</title>
</head>
<style>
	* {
		margin: 0;
		padding: 0;
		box-sizing: border-box;
	}
	body {
		background-color: salmon;
	}
	.container {
		width: 60%;
		margin: auto;
		margin-top: 20px;
		margin-bottom: 20px;
		padding: 20px;
		background-color: whitesmoke;
		box-shadow: 10px 10px 10px black;
	}
	#salida {
		display: flex;
		flex-wrap: wrap;
	}
	#salida div {
		width: 25%;
	}
</style>
<body>
	<div class="container">
		<div id="barraBusqueda">
			<label>Buscar Pokemon por Nombre: </label>
			<select id="selectNombre">
				<option value=""></option>
			</select>
		</div>
		<div id="paginacion"></div>
		<div id="salida"></div>
	</div>
</body>
<script>
	const salida = document.getElementById('salida');

	function mostrar(pokemones) {
		salida.innerHTML = "";
		pokemones.forEach((p) => {
			const carta = document.createElement('div');
			carta.innerHTML = `<p>${p.name}</p>`;
			const imagen = document.createElement('img'); 
			fetch(p.url)
				.then((x) => x.json())
				.then((x) => {
					imagen.src = x.sprites.front_default;
				});
			carta.appendChild(imagen);
			salida.appendChild(carta);
		});
	} 

	function crearBarraBusqueda(){
		const selectNom = document.getElementById('selectNombre');
		fetch('https://pokeapi.co/api/v2/pokemon?offset=0&limit=1320')
			.then((x) => x.json())
			.then((x) => {
				x.results.forEach((p) => {
					const opcion = document.createElement('option');
					opcion.value = p.name;
					opcion.innerHTML = p.name;
					selectNom.appendChild(opcion);
				});
			});
		selectNom.addEventListener('change', () => {
			salida.innerHTML = '';
			const carta = document.createElement('div');
			carta.innerHTML = `<p>${selectNom.value}</p>`;
			const imagen = document.createElement('img'); 
			fetch(`https://pokeapi.co/api/v2/pokemon/${selectNom.value}`)
				.then((x) => x.json())
				.then((x) => {
					imagen.src = x.sprites.front_default;
				});
			carta.appendChild(imagen);
			salida.appendChild(carta);
		});
	}

	function irPagina(nroPagina) {
		fetch(`https://pokeapi.co/api/v2/pokemon?offset=${(nroPagina-1)*20}&limit=20`)
		.then((x) => x.json())
		.then((x) => mostrar(x.results));
	}

	function crearPaginacion() {
		const paginacion = document.getElementById('paginacion');
		let j = 1;
		for (let i = 0; i < 1302; i=i+20) {
		 	const boton = document.createElement('button')
		 	boton.innerHTML = j;
		 	const x = j;
		 	boton.addEventListener('click', () => { irPagina(x) } );
		 	j++; 
		 	paginacion.appendChild(boton);
		} 
	}
	
	function main() {
		crearBarraBusqueda();
		crearPaginacion();
		// adicionarEventos();
		// buscar('');
		irPagina(1);


	}
	main();
</script>
</html>